# 增强功能

本文档记录在原项目基础上新增和改进的功能。

## 请求/响应内容日志

新增完整的请求/响应内容记录功能，便于调试和排查问题。

- 记录上下游请求和响应的完整内容（body + header）
- 在 `DoApiRequest` 中统一捕获上游请求/响应，覆盖所有 provider 格式
- 内容存储上限从 64KB 提升至 1MB，MySQL 自动迁移 `TEXT` → `MEDIUMTEXT`
- 自动清理非 UTF-8 内容，防止因编码问题导致日志丢失
- 扁平化单值请求头，提升可读性

## 日志详情弹窗

对日志详情弹窗进行了多项体验优化：

- 多格式 SSE 整合视图 —— 支持 OpenAI、Anthropic、Gemini、Responses API 四种流式格式的自动识别与合并展示
- SSE 流式响应默认展示整合视图，无需手动切换
- JSON 语法高亮显示
- 非流式 JSON 响应自动格式化
- 请求头/响应头区域增加一键复制按钮
- 内容超过 1MB 时显示截断警告提示

## 其他

- 自用模式下跳过安全验证
